<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>é›è›‹è¨ˆæ™‚å™¨</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      .egg-section {
        margin-bottom: 48px;
        text-align: center;
      }
      .egg-img {
        max-width: 320px;
        width: 100%;
        height: auto;
        display: block;
        margin: 0 auto 16px auto;
      }
      .egg-btn {
        background: #e6b800;
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 10px 24px;
        font-size: 1em;
        cursor: pointer;
        transition: background 0.2s;
      }
      .egg-btn:hover {
        background: #c9a100;
      }
      .timer-container {
        display: flex;
        justify-content: center;
        gap: 48px;
      }
    </style>
  </head>
  <body>
    <div class="back-button-container">
      <button onclick="window.location.href='index.html'" class="back-btn">â† è¿”å›é¦–é </button>
    </div>
    <div class="sound-control">
      <label>
        <input type="checkbox" id="soundToggle" checked> 
        ğŸ”” æ’­æ”¾æé†’éŸ³
      </label>
    </div>
    <h1 style="text-align: center; color: #e6b800; margin-bottom: 40px">
      ä½ è¦å“ªä¸€ç¨®æ°´ç…®è›‹
    </h1>
    <div class="timer-container">
      <div class="egg-section">
        <img src="hard.jpg" alt="hard Boiled Egg" class="egg-img" />
        <button class="egg-btn" id="startBtn1">å…¨ç†Ÿè›‹</button>
        <div
          id="hard-timer"
          style="
            font-size: 2em;
            color: #e6b800;
            margin-top: 16px;
            display: none;
          "
        >
          10:00
        </div>
      </div>
      <div class="egg-section">
        <img src="medium.jpg" alt="Medium Boiled Egg" class="egg-img" />
        <button class="egg-btn" id="startBtn2">åŠç†Ÿè›‹</button>
        <div
          id="medium-timer"
          style="
            font-size: 2em;
            color: #e6b800;
            margin-top: 16px;
            display: none;
          "
        >
          07:00
        </div>
      </div>
      <div class="egg-section">
        <img src="soft.jpg" alt="Soft Boiled Egg" class="egg-img" />
        <button class="egg-btn" id="startBtn3">ç³–å¿ƒè›‹</button>
        <div
          id="soft-timer"
          style="
            font-size: 2em;
            color: #e6b800;
            margin-top: 16px;
            display: none;
          "
        >
          05:00
        </div>
      </div>
    </div>
    <script>
      // å€’æ•¸è¨ˆæ™‚å™¨åŠŸèƒ½
      let hardTimerInterval = null;
      let mediumTimerInterval = null;
      let softTimerInterval = null;
      
      // å»ºç«‹éŸ³æª”ç‰©ä»¶
      const dingSound = new Audio("ding.mp3");
      
      // æ’­æ”¾éŸ³æª”çš„å‡½å¼
      function playDingSound() {
        const soundToggle = document.getElementById('soundToggle');
        if (!soundToggle.checked) return; // å¦‚æœé—œé–‰éŸ³æ•ˆå°±ä¸æ’­æ”¾
        
        dingSound.pause();
        dingSound.currentTime = 0;
        
        dingSound.play()
          .then(() => {
            console.log("âœ… è²éŸ³æ’­æ”¾æˆåŠŸ");
          })
          .catch((err) => {
            console.error("æ’­æ”¾å¤±æ•—ï¼š", err);
          });
      }
      
      // é è¼‰éŸ³æª”ï¼ˆåœ¨ç”¨æˆ¶äº’å‹•æ™‚ï¼‰
      function preloadAudio() {
        dingSound.load();
      }

      document.getElementById("startBtn1").onclick = function () {
        preloadAudio(); // é è¼‰éŸ³æª”
        const timerDiv = document.getElementById("hard-timer");
        timerDiv.style.display = "block";
        timerDiv.textContent = "10:00";
        if (hardTimerInterval) clearInterval(hardTimerInterval);
        hardTimerInterval = setInterval(() => {
          let timeArr = timerDiv.textContent.split(":");
          let seconds =
            parseInt(timeArr[0], 10) * 60 + parseInt(timeArr[1], 10) - 1;
          const m = String(Math.floor(seconds / 60)).padStart(2, "0");
          const s = String(seconds % 60).padStart(2, "0");
          timerDiv.textContent = `${m}:${s}`;
          if (seconds <= 0) {
            clearInterval(hardTimerInterval);
            timerDiv.textContent = "é›è›‹å¥½äº†ï¼";
            playDingSound(); // æ’­æ”¾éŸ³æª”
          }
        }, 1000);
      };

      document.getElementById("startBtn2").onclick = function () {
        preloadAudio(); // é è¼‰éŸ³æª”
        const timerDiv = document.getElementById("medium-timer");
        timerDiv.style.display = "block";
        timerDiv.textContent = "07:00";
        if (mediumTimerInterval) clearInterval(mediumTimerInterval);
        mediumTimerInterval = setInterval(() => {
          let timeArr = timerDiv.textContent.split(":");
          let seconds =
            parseInt(timeArr[0], 10) * 60 + parseInt(timeArr[1], 10) - 1;
          const m = String(Math.floor(seconds / 60)).padStart(2, "0");
          const s = String(seconds % 60).padStart(2, "0");
          timerDiv.textContent = `${m}:${s}`;
          if (seconds <= 0) {
            clearInterval(mediumTimerInterval);
            timerDiv.textContent = "é›è›‹å¥½äº†ï¼";
            playDingSound(); // æ’­æ”¾éŸ³æª”
          }
        }, 1000);
      };

      document.getElementById("startBtn3").onclick = function () {
        preloadAudio(); // é è¼‰éŸ³æª”
        const timerDiv = document.getElementById("soft-timer");
        timerDiv.style.display = "block";
        timerDiv.textContent = "05:00";
        if (softTimerInterval) clearInterval(softTimerInterval);
        softTimerInterval = setInterval(() => {
          let timeArr = timerDiv.textContent.split(":");
          let seconds =
            parseInt(timeArr[0], 10) * 60 + parseInt(timeArr[1], 10) - 1;
          const m = String(Math.floor(seconds / 60)).padStart(2, "0");
          const s = String(seconds % 60).padStart(2, "0");
          timerDiv.textContent = `${m}:${s}`;
          if (seconds <= 0) {
            clearInterval(softTimerInterval);
            timerDiv.textContent = "é›è›‹å¥½äº†ï¼";
            playDingSound(); // æ’­æ”¾éŸ³æª”
          }
        }, 1000);
      };
    </script>
  </body>
</html>
